<div class="card card-shadow">
    <div class="card-header d-flex justify-content-between align-items-center">
        <span>Atualizar Cliente</span>
        <a class="btn btn-sm btn-outline-secondary" routerLink="/clientes">Voltar</a>
    </div>

    <div class="card-body">
        <form (ngSubmit)="salvar()">
            <div class="row g-2">
                <div class="col-md-2">
                    <label class="form-label">Código</label>
                    <input class="form-control" [(ngModel)]="form.Codigo" name="Codigo" required>
                </div>

                <div class="col-md-4">
                    <label class="form-label">Nome</label>
                    <input class="form-control" [(ngModel)]="form.Nome" name="Nome" required>
                </div>

                <div class="col-md-3">
                    <label class="form-label">CPF/CNPJ</label>
                    <input class="form-control"
                           [(ngModel)]="form.CPF_CNPJ" name="CPF_CNPJ"
                           (input)="onDocInput($event)"
                           (blur)="validarCpfCnpj()">
                    <small class="text-danger" *ngIf="erroCpfCnpj">{{ erroCpfCnpj }}</small>
                </div>

                <div class="col-md-3">
                    <label class="form-label">Fone</label>
                    <input class="form-control"
                           [(ngModel)]="form.Fone" name="Fone"
                           placeholder="Ex: 11987654321"
                           (input)="onTelefoneInput($event)">
                </div>

                <div class="col-md-2">
                    <label class="form-label">CEP</label>
                    <input class="form-control"
                           [(ngModel)]="form.CEP" name="CEP"
                           (input)="onCEPInput($event)"
                           (blur)="buscarCEP()">
                </div>

                <div class="col-md-4">
                    <label class="form-label">Logradouro</label>
                    <input class="form-control" [(ngModel)]="form.Logradouro" name="Logradouro">
                </div>

                <div class="col-md-3">
                    <label class="form-label">Endereço</label>
                    <input class="form-control" [(ngModel)]="form.Endereco" name="Endereco">
                </div>

                <div class="col-md-3">
                    <label class="form-label">Número</label>
                    <input class="form-control"
                           [(ngModel)]="form.Numero" name="Numero"
                           (input)="onNumeroInput($event)">
                </div>

                <div class="col-md-3">
                    <label class="form-label">Bairro</label>
                    <input class="form-control" [(ngModel)]="form.Bairro" name="Bairro">
                </div>

                <div class="col-md-2">
                    <label class="form-label">UF</label>
                    <select class="form-select" [(ngModel)]="form.UF" name="UF" (change)="onUFChange()">
                        <option value="">Selecione</option>
                        <option *ngFor="let uf of ufs" [value]="uf.sigla">
                            {{ uf.sigla }} - {{ uf.nome }}
                        </option>
                    </select>
                </div>

                <div class="col-md-4">
                    <label class="form-label">Cidade</label>
                    <select class="form-select" [(ngModel)]="form.Cidade" name="Cidade">
                        <option value="">Selecione</option>
                        <option *ngFor="let c of cidades" [value]="c.nome">{{ c.nome }}</option>
                    </select>
                </div>

                <div class="col-md-3">
                    <label class="form-label">Complemento</label>
                    <input class="form-control" [(ngModel)]="form.Complemento" name="Complemento">
                </div>

                <div class="col-md-3">
                    <label class="form-label">Limite Crédito</label>
                    <input class="form-control"
                           [(ngModel)]="form.LimiteCredito" name="LimiteCredito"
                           placeholder="Ex: 1500,00"
                           (input)="onLimiteInput($event)">
                </div>

                <div class="col-md-3">
                    <label class="form-label">Validade</label>
                    <input type="date" class="form-control" [(ngModel)]="form.Validade" name="Validade">
                </div>
            </div>

            <div class="text-danger mt-2" *ngIf="error">{{ error }}</div>

            <div class="mt-3 d-flex justify-content-end gap-2">
                <button type="submit" class="btn btn-primary" [disabled]="saving">
                    {{ saving ? 'Atualizando...' : 'Atualizar' }}
                </button>
            </div>
        </form>
    </div>
</div>
